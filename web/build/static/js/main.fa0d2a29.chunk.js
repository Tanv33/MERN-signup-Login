(this["webpackJsonpsignup-login-mern"]=this["webpackJsonpsignup-login-mern"]||[]).push([[0],{173:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},303:function(e,t,a){},304:function(e,t,a){},305:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(46),o=a.n(s),i=(a(173),a(174),a(12)),c=(a(175),a(361)),l=a(352),d=a(360),u=a(362),h=a(86),j=a(34),b=a(27),m=a.n(b),p=a(355),x=a(345),O=a(1);function f(e){return Object(O.jsx)(x.a,{sx:{width:"100%",position:"absolute",top:"0"},spacing:2,children:Object(O.jsx)(p.a,{severity:e.type,children:e.message})})}var g=a(18),v=a(70),y=function(e,t){switch(t.type){case"USER_LOGIN":return t.payload.fullName&&t.payload.email&&t.payload.gender&&t.payload.phoneNumber&&t.payload.address?Object(v.a)(Object(v.a)({},e),{},{user:t.payload}):(console.log("invalid data in USER_LOGIN reducer "),e);case"USER_LOGOUT":return Object(v.a)(Object(v.a)({},e),{},{user:null});default:return e}},w=Object(n.createContext)("Initial Value"),N={user:void 0};function C(e){var t=e.children,a=Object(n.useReducer)(y,N),r=Object(i.a)(a,2),s=r[0],o=r[1];return Object(O.jsx)(w.Provider,{value:{state:s,dispatch:o},children:t})}var E=j.a({email:j.b("Enter your email").min(14,"Email should be 14 characters long").email("Enter a valid email").required("Email is required"),password:j.b("Enter your password").min(8,"Password should be of minimum 8 characters length").required("Password is required")});var S=function(){var e=Object(n.useContext)(w).dispatch,t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],s=a[1],o="localhost"===window.location.hostname.split(":")[0]?"http://localhost:2000":"",j=Object(h.a)({initialValues:{email:"",password:""},validationSchema:E,onSubmit:function(t){m.a.post("".concat(o,"/api/v1/login"),{email:t.email,password:t.password},{withCredentials:!0}).then((function(t){"error"!==t.data?(s(!0),setTimeout((function(){e({type:"USER_LOGIN",payload:{id:t.data._id,fullName:t.data.fullName,email:t.data.email,gender:t.data.gender,phoneNumber:t.data.phoneNumber,address:t.data.address}}),b.push("/"),s([])}),500)):(s(!1),setTimeout((function(){s([])}),1e3))}))}}),b=Object(g.f)();return Object(O.jsxs)(O.Fragment,{children:[!0===r?Object(O.jsx)(f,{type:"success",message:"Welcome"}):"",!1===r?Object(O.jsx)(f,{type:"error",message:"Invalid email or password"}):"",Object(O.jsx)("div",{className:"mainParent",children:Object(O.jsxs)("div",{className:"parentChild",children:[Object(O.jsx)("div",{className:"loginHeading",children:Object(O.jsx)(d.a,{variant:"h4",style:{fontWeight:"bold",color:"#800020"},children:"Login Form"})}),Object(O.jsxs)(c.a,{type:"form",component:"form",noValidate:!0,autoComplete:"off",textAlign:"center",onSubmit:j.handleSubmit,children:[Object(O.jsx)(l.a,{fullWidth:!0,type:"email",name:"email",label:"Email",variant:"outlined",placeholder:"Enter your Email",value:j.values.email,onChange:j.handleChange,error:j.touched.email&&Boolean(j.errors.email),helperText:j.touched.email&&j.errors.email,style:{marginBottom:"15px"}}),Object(O.jsx)(l.a,{fullWidth:!0,type:"password",name:"password",id:"outlined-basic",label:"Password",variant:"outlined",placeholder:"Enter Password",value:j.values.password,onChange:j.handleChange,error:j.touched.password&&Boolean(j.errors.password),helperText:j.touched.password&&j.errors.password}),Object(O.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginTop:"12px"},children:[Object(O.jsx)(u.a,{type:"submit",size:"small",variant:"contained",style:{marginRight:"5px",backgroundColor:"#800020"},children:"Submit"}),Object(O.jsx)(u.a,{variant:"contained",size:"small",color:"error",onClick:function(){return b.push("/signup")},style:{backgroundColor:"#800020"},children:"Create an account"})]})]})]})})]})},P=(a(303),a(354)),T=a(356),k=a(363),B=a(357),G=a(350),q=j.a({fullName:j.b("Enter a valid Name").min(8,"Name should be 8 characters long").required("Name is required"),email:j.b("Enter your email").min(14,"Email should be 14 characters long").email("Enter a valid email").required("Email is required"),phoneNumber:j.b("Enter your phone number").min(10,"Phone number should be 10 integers long").required("Phone number is required"),password:j.b("Enter your password").min(8,"Password should be of minimum 8 characters length").required("Password is required"),address:j.b("Enter your address").min(20,"Address should be of minimum 20 characters in length").required("Address is required")});var L=function(){var e=Object(g.f)(),t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],s=a[1],o="localhost"===window.location.hostname.split(":")[0]?"http://localhost:2000":"",j=Object(h.a)({initialValues:{fullName:"",email:"",phoneNumber:"",password:"",address:""},validationSchema:q,onSubmit:function(t){var a=document.querySelector('input[name="gender"]:checked').value;m.a.post("".concat(o,"/api/v1/signupuser"),{fullName:t.fullName,email:t.email,gender:a,phoneNumber:Number(t.phoneNumber),password:t.password,address:t.address}).then((function(t){"user created"===t.data&&(s(!0),setTimeout((function(){e.push("/login"),s("")}),1e3))})).catch((function(e){}))}});return Object(n.useEffect)((function(){m.a.get("".concat(o,"/api/v1/signupuser")).then((function(e){}))}),[]),Object(O.jsxs)("div",{children:[!0===r?Object(O.jsx)(f,{type:"success",message:"Welcome! Successfully account created"}):"",Object(O.jsx)("div",{className:"mainParentSign",children:Object(O.jsxs)("div",{className:"parentChildSign",children:[Object(O.jsx)("div",{className:"loginHeadingSign",children:Object(O.jsx)(d.a,{variant:"h4",style:{fontWeight:"bold",color:"#800020"},children:"Signup Form"})}),Object(O.jsxs)(c.a,{type:"form",component:"form",noValidate:!0,autoComplete:"off",onSubmit:j.handleSubmit,children:[Object(O.jsx)(l.a,{fullWidth:!0,name:"fullName",label:"Full Name",variant:"outlined",placeholder:"Enter Your Name",value:j.values.fullName,onChange:j.handleChange,onBlur:j.handleBlur,error:j.touched.fullName&&Boolean(j.errors.fullName),helperText:j.touched.fullName&&j.errors.fullName,style:{marginBottom:"10px"}}),Object(O.jsx)(l.a,{fullWidth:!0,name:"email",type:"email",label:"Email",variant:"outlined",placeholder:"Enter your Email",value:j.values.email,onChange:j.handleChange,error:j.touched.email&&Boolean(j.errors.email),helperText:j.touched.email&&j.errors.email,style:{marginBottom:"10px"}}),Object(O.jsxs)(B.a,{component:"fieldset",children:[Object(O.jsx)(G.a,{component:"legend",style:{textAlign:"left"},children:"Gender"}),Object(O.jsxs)(T.a,{"aria-label":"gender",defaultValue:"male",name:"genderParent",children:[Object(O.jsx)(k.a,{name:"gender",value:"male",control:Object(O.jsx)(P.a,{}),label:"Male"}),Object(O.jsx)(k.a,{name:"gender",value:"female",control:Object(O.jsx)(P.a,{}),label:"Female"})]})]}),Object(O.jsx)(l.a,{fullWidth:!0,name:"phoneNumber",label:"Phone Number",type:"number",variant:"outlined",placeholder:"Enter Phone Number",value:j.values.phoneNumber,onChange:j.handleChange,error:j.touched.phoneNumber&&Boolean(j.errors.phoneNumber),helperText:j.touched.phoneNumber&&j.errors.phoneNumber,style:{marginBottom:"10px"}}),Object(O.jsx)(l.a,{fullWidth:!0,name:"password",type:"password",label:"Password",variant:"outlined",placeholder:"Enter Password",value:j.values.password,onChange:j.handleChange,error:j.touched.password&&Boolean(j.errors.password),helperText:j.touched.password&&j.errors.password,style:{marginBottom:"10px"}}),Object(O.jsx)(l.a,{fullWidth:!0,name:"address",id:"outlined-basic",label:"Address",variant:"outlined",placeholder:"Type Your address",value:j.values.address,onChange:j.handleChange,error:j.touched.address&&Boolean(j.errors.address),helperText:j.touched.address&&j.errors.address,style:{marginBottom:"10px"}}),Object(O.jsx)(u.a,{type:"submit",size:"medium",variant:"contained",style:{marginRight:"5px",backgroundColor:"#800020",marginBottom:"15px"},children:"Submit"}),Object(O.jsx)(u.a,{size:"medium",variant:"contained",color:"success",style:{backgroundColor:"#800020",marginBottom:"15px"},onClick:function(){return e.push("/")},children:"I have an account"})]})]})})]})},U=a(366),W=a(364),I=a(365),R=a(368),A=a(369),_=a(371),F=a(370),H=a(359);function V(e){var t=e.title,a=e.subHeader,n=e.smallImg,r=e.mainImg,s=e.content;return Object(O.jsx)("div",{children:Object(O.jsxs)(R.a,{sx:{flexGrow:1,maxWidth:900,m:2},children:[Object(O.jsx)(A.a,{avatar:Object(O.jsx)(H.a,{alt:"",src:n}),title:t||"User",subheader:a||"Waiting..."}),Object(O.jsx)(F.a,{component:"img",image:r||"https://www.w3schools.com/css/img_lights.jpg",alt:"Post Pics"}),Object(O.jsx)(_.a,{children:Object(O.jsx)(d.a,{variant:"body2",color:"text.secondary",component:"p",children:s||"Waiting for content..."})}),Object(O.jsx)(u.a,{sx:{m:1},variant:"contained",color:"error",children:"Delete"})]})})}var z=function(){var e=Object(g.f)(),t="localhost"===window.location.hostname.split(":")[0]?"http://localhost:2000":"",a=Object(n.useContext)(w),r=a.state,s=a.dispatch,o=Object(n.useState)(""),h=Object(i.a)(o,2),j=h[0],b=h[1],p=Object(n.useState)([]),x=Object(i.a)(p,2),v=x[0],y=x[1],N=Object(n.useState)(!1),C=Object(i.a)(N,2),E=C[0],S=C[1],P=Object(n.useState)(""),T=Object(i.a)(P,2),k=T[0],B=T[1];return Object(n.useEffect)((function(){return m.a.get("".concat(t,"/api/v1/post")).then((function(e){var t=[];e.data.forEach((function(e){t.unshift(e)})),y([].concat(t))})),function(){}}),[E]),Object(O.jsxs)("div",{children:[Object(O.jsx)(c.a,{sx:{flexGrow:1},children:Object(O.jsx)(W.a,{position:"static",sx:{backgroundColor:"#800020"},children:Object(O.jsxs)(I.a,{children:[Object(O.jsx)(d.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(O.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.push("/")},children:"Home"})}),Object(O.jsx)(u.a,{color:"inherit",onClick:function(){return e.push("/profile")},children:"Profile"}),Object(O.jsx)(u.a,{color:"inherit",onClick:function(){var a;(null===r||void 0===r||null===(a=r.user)||void 0===a?void 0:a.fullName)?(m.a.post("".concat(t,"/api/v1/logout"),{},{withCredentials:!0}).then((function(e){})),B(!0),setTimeout((function(){s({type:"USER_LOGOUT",payload:""}),e.push("/"),B([])}),1e3)):(B(!1),setTimeout((function(){B([])}),1e3))},children:"Logout"})]})})}),Object(O.jsxs)(U.a,{children:[Object(O.jsx)(d.a,{variant:"h4",style:{marginTop:"30px",fontWeight:"bold",color:"darkred"},children:"Type your Post"}),Object(O.jsxs)("form",{onSubmit:function(e){var a;(e.preventDefault(),""!==j)&&((null===r||void 0===r||null===(a=r.user)||void 0===a?void 0:a.fullName)&&m.a.post("".concat(t,"/api/v1/post"),{text:j,author:r.user.fullName,authorId:r.user.id}).then((function(e){S(!E),b("")})))},children:[Object(O.jsx)(c.a,{sx:{"& > :not(style)":{marginTop:"20px",marginBottom:"14px",width:"100%"}},autoComplete:"off",children:Object(O.jsx)(l.a,{label:"Enter text",value:j,onChange:function(e){b(e.target.value)},variant:"filled"})}),Object(O.jsx)(u.a,{variant:"contained",color:"error",size:"large",style:{marginBottom:"40px"},type:"submit",children:"Post"})]}),Object(O.jsx)("div",{style:{backgroundColor:"#800020",textAlign:"center",padding:"16px",borderRadius:"5px"},children:Object(O.jsx)(d.a,{variant:"h6",color:"white",children:"All Users Posts"})}),Object(O.jsx)("br",{}),Object(O.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:v.map((function(e){return Object(O.jsx)(V,{title:e.author,subHeader:"10 mins ago",content:e.text},e._id)}))})]}),!0===k?Object(O.jsx)(f,{type:"success",message:"Good bye!"}):"",!1===k?Object(O.jsx)(f,{type:"error",message:"Sorry! Something went wrong"}):""]})};var J=function(){var e=Object(g.f)(),t="localhost"===window.location.hostname.split(":")[0]?"http://localhost:2000":"",a=Object(n.useContext)(w),r=a.state,s=a.dispatch,o=Object(n.useState)(""),l=Object(i.a)(o,2),h=l[0],j=l[1],b=Object(n.useState)([]),p=Object(i.a)(b,2),x=p[0],v=p[1];return Object(n.useEffect)((function(){return m.a.get("".concat(t,"/api/v1/post")).then((function(e){var t=[];e.data.forEach((function(e){t.unshift(e)})),v([].concat(t))})),function(){}}),[]),Object(O.jsxs)("div",{children:[!0===h?Object(O.jsx)(f,{type:"success",message:"Good bye!"}):"",!1===h?Object(O.jsx)(f,{type:"error",message:"Sorry! Something went wrong"}):"",Object(O.jsx)(c.a,{sx:{flexGrow:1},children:Object(O.jsx)(W.a,{position:"static",sx:{backgroundColor:"#800020"},children:Object(O.jsxs)(I.a,{children:[Object(O.jsx)(d.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(O.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return e.push("/")},children:[" ","Home"]})}),Object(O.jsx)(u.a,{color:"inherit",onClick:function(){return e.push("/profile")},children:"Profile"})," ",Object(O.jsx)(u.a,{color:"inherit",onClick:function(){var a;(null===r||void 0===r||null===(a=r.user)||void 0===a?void 0:a.fullName)?(m.a.post("".concat(t,"/api/v1/logout"),{},{withCredentials:!0}).then((function(e){})),j(!0),setTimeout((function(){s({type:"USER_LOGOUT",payload:""}),e.push("/"),j([])}),1e3)):(j(!1),setTimeout((function(){j([])}),1e3))},children:"Logout"})]})})}),Object(O.jsxs)(U.a,{children:[Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"10px",marginBottom:"30px"},children:Object(O.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQJdfwoLPgNXoV0q8tDwIPQNUF3drxXLF1KXzJA-kQJKZy0n6x7MdxGnArJ2ghGv95-CYc&usqp=CAU",style:{borderRadius:"50%"},alt:"userPic"})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",marginBottom:"20px"},children:Object(O.jsxs)("div",{style:{alignSelf:"center"},children:[Object(O.jsxs)(d.a,{variant:"h6",children:["Name: \xa0",r.user.fullName," "]}),Object(O.jsxs)(d.a,{variant:"h6",children:["Email: \xa0",r.user.email]}),Object(O.jsxs)(d.a,{variant:"h6",children:["Gender: \xa0",r.user.gender]}),Object(O.jsxs)(d.a,{variant:"h6",children:["Phone Number: \xa0",r.user.phoneNumber]}),Object(O.jsxs)(d.a,{variant:"h6",children:["Address: \xa0",r.user.address]})]})}),Object(O.jsx)("br",{}),Object(O.jsx)("div",{style:{backgroundColor:"#800020",textAlign:"center",padding:"16px",borderRadius:"5px"},children:Object(O.jsx)(d.a,{variant:"h6",color:"white",children:"Your Posts"})}),Object(O.jsx)("br",{}),Object(O.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:x.map((function(e){return e.authorId===r.user.id?Object(O.jsx)(V,{title:e.author,subHeader:"10 mins ago",content:e.text},e._id):""}))})]})]})};a(304);var D=function(){return Object(O.jsx)("div",{className:"body",children:Object(O.jsxs)("div",{className:"text-blinking",children:[Object(O.jsx)("span",{children:"L"}),Object(O.jsx)("span",{children:"o"}),Object(O.jsx)("span",{children:"a"}),Object(O.jsx)("span",{children:"d"}),Object(O.jsx)("span",{children:"i"}),Object(O.jsx)("span",{children:"n"}),Object(O.jsx)("span",{children:"g"}),Object(O.jsx)("span",{children:"."}),Object(O.jsx)("span",{children:"."}),"\xa0",Object(O.jsx)("span",{children:"."}),Object(O.jsx)("span",{children:"."}),Object(O.jsx)("span",{children:"."}),Object(O.jsx)("span",{children:"."}),Object(O.jsx)("span",{children:"."}),Object(O.jsx)("span",{children:"."})]})})};var Y=function(){var e=Object(n.useContext)(w),t=e.state,a=e.dispatch,r="localhost"===window.location.hostname.split(":")[0]?"http://localhost:2000":"";return Object(n.useEffect)((function(){return m.a.get("".concat(r,"/api/v1/tokenforcontext"),{withCredentials:!0}).then((function(e){var t;(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.email)?a({type:"USER_LOGIN",payload:{id:e.data.id,fullName:e.data.fullName,email:e.data.email,gender:e.data.gender,phoneNumber:e.data.phoneNumber,address:e.data.address}}):a({type:"USER_LOGOUT"})})).catch((function(e){a({type:"USER_LOGOUT"})})),function(){}}),[]),Object(O.jsxs)(O.Fragment,{children:[void 0===t.user?Object(O.jsxs)(g.c,{children:[Object(O.jsx)(g.a,{exact:!0,path:"/",children:Object(O.jsx)(D,{})}),Object(O.jsx)(g.a,{path:"*",children:Object(O.jsx)("h1",{children:"Loading..."})})]}):null,null===t.user?Object(O.jsxs)(g.c,{children:[Object(O.jsx)(g.a,{exact:!0,path:"/",component:S}),Object(O.jsx)(g.a,{exact:!0,path:"/signup",component:L}),Object(O.jsx)(g.a,{path:"*",children:Object(O.jsx)(S,{})})]}):null,t.user?Object(O.jsxs)(g.c,{children:[Object(O.jsx)(g.a,{exact:!0,path:"/",component:z}),Object(O.jsx)(g.a,{exact:!0,path:"/profile",component:J}),Object(O.jsx)(g.a,{path:"*",children:Object(O.jsx)(z,{})})]}):null]})},M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,372)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),s(e),o(e)}))},Q=a(49);o.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(C,{children:Object(O.jsx)(Q.a,{children:Object(O.jsx)(Y,{})})})}),document.getElementById("root")),M()}},[[305,1,2]]]);
//# sourceMappingURL=main.fa0d2a29.chunk.js.map