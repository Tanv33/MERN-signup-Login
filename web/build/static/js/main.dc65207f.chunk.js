(this["webpackJsonpsignup-login-mern"]=this["webpackJsonpsignup-login-mern"]||[]).push([[0],{173:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},303:function(e,t,a){},304:function(e,t,a){},305:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(46),o=a.n(s),i=(a(173),a(174),a(12)),c=(a(175),a(361)),l=a(352),d=a(360),u=a(362),j=a(86),h=a(34),b=a(25),m=a.n(b),p=a(355),x=a(345),O=a(1);function f(e){return Object(O.jsx)(x.a,{sx:{width:"100%",position:"absolute",top:"0"},spacing:2,children:Object(O.jsx)(p.a,{severity:e.type,children:e.message})})}var g=a(18),v=a(70),y=function(e,t){switch(t.type){case"USER_LOGIN":return t.payload.fullName&&t.payload.email&&t.payload.gender&&t.payload.phoneNumber&&t.payload.address?Object(v.a)(Object(v.a)({},e),{},{user:t.payload}):(console.log("invalid data in USER_LOGIN reducer "),e);case"USER_LOGOUT":return Object(v.a)(Object(v.a)({},e),{},{user:null});default:return e}},w=Object(n.createContext)("Initial Value"),C={user:void 0};function N(e){var t=e.children,a=Object(n.useReducer)(y,C),r=Object(i.a)(a,2),s=r[0],o=r[1];return Object(O.jsx)(w.Provider,{value:{state:s,dispatch:o},children:t})}var S=h.a({email:h.b("Enter your email").min(14,"Email should be 14 characters long").email("Enter a valid email").required("Email is required"),password:h.b("Enter your password").min(8,"Password should be of minimum 8 characters length").required("Password is required")});var E=function(){var e=Object(n.useContext)(w).dispatch,t=Object(n.useState)(void 0),a=Object(i.a)(t,2),r=a[0],s=a[1],o="localhost"===window.location.hostname.split(":")[0]?"http://localhost:2000":"",h=Object(j.a)({initialValues:{email:"",password:""},validationSchema:S,onSubmit:function(t){m.a.post("".concat(o,"/api/v1/login"),{email:t.email,password:t.password},{withCredentials:!0}).then((function(t){"Incorrect email"===t.data&&(s(!1),setTimeout((function(){s(void 0)}),1e3)),"Incorrect password"===t.data&&(s(""),setTimeout((function(){s(void 0)}),1e3)),"Incorrect password"!==t.data&&"Incorrect email"!==t.data&&(s(!0),setTimeout((function(){e({type:"USER_LOGIN",payload:{id:t.data._id,fullName:t.data.fullName,email:t.data.email,gender:t.data.gender,phoneNumber:t.data.phoneNumber,address:t.data.address}}),b.push("/"),s(void 0)}),500))}))}}),b=Object(g.f)();return Object(O.jsxs)(O.Fragment,{children:[!0===r?Object(O.jsx)(f,{type:"success",message:"Welcome"}):"",!1===r?Object(O.jsx)(f,{type:"error",message:"Incorrect email"}):"",""===r?Object(O.jsx)(f,{type:"error",message:"Incorrect password"}):"",Object(O.jsx)("div",{className:"mainParent",children:Object(O.jsxs)("div",{className:"parentChild",children:[Object(O.jsx)("div",{className:"loginHeading",children:Object(O.jsx)(d.a,{variant:"h4",style:{fontWeight:"bold",color:"#800020"},children:"Login Form"})}),Object(O.jsxs)(c.a,{type:"form",component:"form",noValidate:!0,autoComplete:"off",textAlign:"center",onSubmit:h.handleSubmit,children:[Object(O.jsx)(l.a,{fullWidth:!0,type:"email",name:"email",label:"Email",variant:"outlined",placeholder:"Enter your Email",value:h.values.email,onChange:h.handleChange,error:h.touched.email&&Boolean(h.errors.email),helperText:h.touched.email&&h.errors.email,style:{marginBottom:"15px"}}),Object(O.jsx)(l.a,{fullWidth:!0,type:"password",name:"password",id:"outlined-basic",label:"Password",variant:"outlined",placeholder:"Enter Password",value:h.values.password,onChange:h.handleChange,error:h.touched.password&&Boolean(h.errors.password),helperText:h.touched.password&&h.errors.password}),Object(O.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginTop:"12px"},children:[Object(O.jsx)(u.a,{type:"submit",size:"small",variant:"contained",style:{marginRight:"5px",backgroundColor:"#800020"},children:"Submit"}),Object(O.jsx)(u.a,{variant:"contained",size:"small",color:"error",onClick:function(){return b.push("/signup")},style:{backgroundColor:"#800020"},children:"Create an account"})]})]})]})})]})},P=(a(303),a(354)),T=a(356),k=a(363),B=a(357),G=a(350),q=h.a({fullName:h.b("Enter a valid Name").min(8,"Name should be 8 characters long").required("Name is required"),email:h.b("Enter your email").min(14,"Email should be 14 characters long").email("Enter a valid email").required("Email is required"),phoneNumber:h.b("Enter your phone number").min(10,"Phone number should be 10 integers long").required("Phone number is required"),password:h.b("Enter your password").min(8,"Password should be of minimum 8 characters length").required("Password is required"),address:h.b("Enter your address").min(20,"Address should be of minimum 20 characters in length").required("Address is required")});var I=function(){var e=Object(g.f)(),t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],s=a[1],o="localhost"===window.location.hostname.split(":")[0]?"http://localhost:2000":"",h=Object(j.a)({initialValues:{fullName:"",email:"",phoneNumber:"",password:"",address:""},validationSchema:q,onSubmit:function(t){var a=document.querySelector('input[name="gender"]:checked').value;m.a.post("".concat(o,"/api/v1/signupuser"),{fullName:t.fullName,email:t.email,gender:a,phoneNumber:Number(t.phoneNumber),password:t.password,address:t.address}).then((function(t){return"user created"===t.data?(s(!0),void setTimeout((function(){e.push("/"),s("")}),1e3)):"user already exist"===t.data?(s(!1),void setTimeout((function(){s("")}),1e3)):void 0})).catch((function(e){}))}});return Object(n.useEffect)((function(){m.a.get("".concat(o,"/api/v1/signupuser")).then((function(e){}))}),[]),Object(O.jsxs)("div",{children:[!0===r?Object(O.jsx)(f,{type:"success",message:"Welcome! Successfully account created"}):"",!1===r?Object(O.jsx)(f,{type:"error",message:"Sorry: Email already exist"}):"",Object(O.jsx)("div",{className:"mainParentSign",children:Object(O.jsxs)("div",{className:"parentChildSign",children:[Object(O.jsx)("div",{className:"loginHeadingSign",children:Object(O.jsx)(d.a,{variant:"h4",style:{fontWeight:"bold",color:"#800020"},children:"Signup Form"})}),Object(O.jsxs)(c.a,{type:"form",component:"form",noValidate:!0,autoComplete:"off",onSubmit:h.handleSubmit,children:[Object(O.jsx)(l.a,{fullWidth:!0,name:"fullName",label:"Full Name",variant:"outlined",placeholder:"Enter Your Name",value:h.values.fullName,onChange:h.handleChange,onBlur:h.handleBlur,error:h.touched.fullName&&Boolean(h.errors.fullName),helperText:h.touched.fullName&&h.errors.fullName,style:{marginBottom:"10px"}}),Object(O.jsx)(l.a,{fullWidth:!0,name:"email",type:"email",label:"Email",variant:"outlined",placeholder:"Enter your Email",value:h.values.email,onChange:h.handleChange,error:h.touched.email&&Boolean(h.errors.email),helperText:h.touched.email&&h.errors.email,style:{marginBottom:"10px"}}),Object(O.jsxs)(B.a,{component:"fieldset",children:[Object(O.jsx)(G.a,{component:"legend",style:{textAlign:"left"},children:"Gender"}),Object(O.jsxs)(T.a,{"aria-label":"gender",defaultValue:"male",name:"genderParent",children:[Object(O.jsx)(k.a,{name:"gender",value:"male",control:Object(O.jsx)(P.a,{}),label:"Male"}),Object(O.jsx)(k.a,{name:"gender",value:"female",control:Object(O.jsx)(P.a,{}),label:"Female"})]})]}),Object(O.jsx)(l.a,{fullWidth:!0,name:"phoneNumber",label:"Phone Number",type:"number",variant:"outlined",placeholder:"Enter Phone Number",value:h.values.phoneNumber,onChange:h.handleChange,error:h.touched.phoneNumber&&Boolean(h.errors.phoneNumber),helperText:h.touched.phoneNumber&&h.errors.phoneNumber,style:{marginBottom:"10px"}}),Object(O.jsx)(l.a,{fullWidth:!0,name:"password",type:"password",label:"Password",variant:"outlined",placeholder:"Enter Password",value:h.values.password,onChange:h.handleChange,error:h.touched.password&&Boolean(h.errors.password),helperText:h.touched.password&&h.errors.password,style:{marginBottom:"10px"}}),Object(O.jsx)(l.a,{fullWidth:!0,name:"address",id:"outlined-basic",label:"Address",variant:"outlined",placeholder:"Type Your address",value:h.values.address,onChange:h.handleChange,error:h.touched.address&&Boolean(h.errors.address),helperText:h.touched.address&&h.errors.address,style:{marginBottom:"10px"}}),Object(O.jsx)(u.a,{type:"submit",size:"medium",variant:"contained",style:{marginRight:"5px",backgroundColor:"#800020",marginBottom:"15px"},children:"Submit"}),Object(O.jsx)(u.a,{size:"medium",variant:"contained",color:"success",style:{backgroundColor:"#800020",marginBottom:"15px"},onClick:function(){return e.push("/")},children:"I have an account"})]})]})})]})},L=a(14),U=a(366),W=a(364),R=a(365),A=a(368),_=a(369),F=a(371),H=a(370),V=a(359);function z(e){var t=e.title,a=e.subHeader,n=e.smallImg,r=e.mainImg,s=e.content;return Object(O.jsx)("div",{children:Object(O.jsxs)(A.a,{sx:{flexGrow:1,maxWidth:900,m:2},children:[Object(O.jsx)(_.a,{avatar:Object(O.jsx)(V.a,{alt:"",src:n}),title:t||"User",subheader:a||"Waiting..."}),Object(O.jsx)(H.a,{component:"img",image:r||"https://www.w3schools.com/css/img_lights.jpg",alt:"Post Pics"}),Object(O.jsx)(F.a,{children:Object(O.jsx)(d.a,{variant:"body2",color:"text.secondary",component:"p",children:s||"Waiting for content..."})}),Object(O.jsx)(u.a,{sx:{m:1},variant:"contained",color:"error",children:"Delete"})]})})}var J=function(){var e=Object(g.f)(),t="localhost"===window.location.hostname.split(":")[0]?"http://localhost:2000":"",a=Object(n.useContext)(w),r=a.state,s=a.dispatch,o=Object(n.useState)(""),j=Object(i.a)(o,2),h=j[0],b=j[1],p=Object(n.useState)([]),x=Object(i.a)(p,2),v=x[0],y=x[1],C=Object(n.useState)(!1),N=Object(i.a)(C,2),S=N[0],E=N[1],P=Object(n.useState)(""),T=Object(i.a)(P,2),k=T[0],B=T[1],G=Object(n.useState)(!0),q=Object(i.a)(G,2),I=q[0],A=q[1];Object(n.useEffect)((function(){return m.a.get("".concat(t,"/api/v1/posts?page=0"),{withCredentials:!0}).then((function(e){y(e.data)})),function(){}}),[S]);var _=function(){return m.a.get("".concat(t,"/api/v1/posts?page=").concat(v.length),{withCredentials:!0}).then((function(e){if(e.data.length){var t=[].concat(Object(L.a)(v),Object(L.a)(e.data));y(t)}else A(!1)})),function(){}};return Object(O.jsxs)("div",{children:[Object(O.jsx)(c.a,{sx:{flexGrow:1},children:Object(O.jsx)(W.a,{position:"static",sx:{backgroundColor:"#800020"},children:Object(O.jsxs)(R.a,{children:[Object(O.jsx)(d.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(O.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.push("/")},children:"Home"})}),Object(O.jsx)(u.a,{color:"inherit",onClick:function(){return e.push("/profile")},children:"Profile"}),Object(O.jsx)(u.a,{color:"inherit",onClick:function(){var a;(null===r||void 0===r||null===(a=r.user)||void 0===a?void 0:a.fullName)?(m.a.post("".concat(t,"/api/v1/logout"),{},{withCredentials:!0}).then((function(e){})),B(!0),setTimeout((function(){s({type:"USER_LOGOUT",payload:""}),e.push("/"),B([])}),1e3)):(B(!1),setTimeout((function(){B([])}),1e3))},children:"Logout"})]})})}),Object(O.jsxs)(U.a,{children:[Object(O.jsx)(d.a,{variant:"h4",style:{marginTop:"30px",fontWeight:"bold",color:"darkred"},children:"Type your Post"}),Object(O.jsxs)("form",{onSubmit:function(e){var a;(e.preventDefault(),""!==h)&&((null===r||void 0===r||null===(a=r.user)||void 0===a?void 0:a.fullName)&&m.a.post("".concat(t,"/api/v1/posts"),{text:h},{withCredentials:!0}).then((function(e){E(!S),b("")})))},children:[Object(O.jsx)(c.a,{sx:{"& > :not(style)":{marginTop:"20px",marginBottom:"14px",width:"100%"}},autoComplete:"off",children:Object(O.jsx)(l.a,{label:"Enter text",value:h,onChange:function(e){b(e.target.value)},variant:"filled"})}),Object(O.jsx)(u.a,{variant:"contained",color:"error",size:"large",style:{marginBottom:"40px"},type:"submit",children:"Post"})]}),Object(O.jsx)("div",{style:{backgroundColor:"#800020",textAlign:"center",padding:"16px",borderRadius:"5px"},children:Object(O.jsx)(d.a,{variant:"h6",color:"white",children:"All Users Posts"})}),Object(O.jsx)("br",{}),Object(O.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:v.map((function(e){return Object(O.jsx)(z,{title:e.author,subHeader:"10 mins ago",content:e.text},e._id)}))}),Object(O.jsx)("section",{style:{margin:"14px",display:"flex",justifyContent:"center"},children:I?Object(O.jsx)(u.a,{variant:"contained",onClick:_,color:"secondary",children:"Load more"}):Object(O.jsx)(u.a,{variant:"contained",disabled:!0,onClick:_,color:"secondary",children:"Sorry No More Post"})})]}),!0===k?Object(O.jsx)(f,{type:"success",message:"Good bye!"}):"",!1===k?Object(O.jsx)(f,{type:"error",message:"Sorry! Something went wrong"}):""]})};var D=function(){var e=Object(g.f)(),t="localhost"===window.location.hostname.split(":")[0]?"http://localhost:2000":"",a=Object(n.useContext)(w),r=a.state,s=a.dispatch,o=Object(n.useState)(""),l=Object(i.a)(o,2),j=l[0],h=l[1],b=Object(n.useState)([]),p=Object(i.a)(b,2),x=p[0],v=p[1];return Object(n.useEffect)((function(){return m.a.get("".concat(t,"/api/v1/post"),{withCredentials:!0}).then((function(e){v(e.data)})),function(){}}),[]),Object(O.jsxs)("div",{children:[!0===j?Object(O.jsx)(f,{type:"success",message:"Good bye!"}):"",!1===j?Object(O.jsx)(f,{type:"error",message:"Sorry! Something went wrong"}):"",Object(O.jsx)(c.a,{sx:{flexGrow:1},children:Object(O.jsx)(W.a,{position:"static",sx:{backgroundColor:"#800020"},children:Object(O.jsxs)(R.a,{children:[Object(O.jsx)(d.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(O.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return e.push("/")},children:[" ","Home"]})}),Object(O.jsx)(u.a,{color:"inherit",onClick:function(){return e.push("/profile")},children:"Profile"})," ",Object(O.jsx)(u.a,{color:"inherit",onClick:function(){var a;(null===r||void 0===r||null===(a=r.user)||void 0===a?void 0:a.fullName)?(m.a.post("".concat(t,"/api/v1/logout"),{},{withCredentials:!0}).then((function(e){})),h(!0),setTimeout((function(){s({type:"USER_LOGOUT",payload:""}),e.push("/"),h([])}),1e3)):(h(!1),setTimeout((function(){h([])}),1e3))},children:"Logout"})]})})}),Object(O.jsxs)(U.a,{children:[Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"10px",marginBottom:"30px"},children:Object(O.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQJdfwoLPgNXoV0q8tDwIPQNUF3drxXLF1KXzJA-kQJKZy0n6x7MdxGnArJ2ghGv95-CYc&usqp=CAU",style:{borderRadius:"50%"},alt:"userPic"})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",marginBottom:"20px"},children:Object(O.jsxs)("div",{style:{alignSelf:"center"},children:[Object(O.jsxs)(d.a,{variant:"h6",children:["Name: \xa0",r.user.fullName," "]}),Object(O.jsxs)(d.a,{variant:"h6",children:["Email: \xa0",r.user.email]}),Object(O.jsxs)(d.a,{variant:"h6",children:["Gender: \xa0",r.user.gender]}),Object(O.jsxs)(d.a,{variant:"h6",children:["Phone Number: \xa0",r.user.phoneNumber]}),Object(O.jsxs)(d.a,{variant:"h6",children:["Address: \xa0",r.user.address]})]})}),Object(O.jsx)("br",{}),Object(O.jsx)("div",{style:{backgroundColor:"#800020",textAlign:"center",padding:"16px",borderRadius:"5px"},children:Object(O.jsx)(d.a,{variant:"h6",color:"white",children:"Your Posts"})}),Object(O.jsx)("br",{}),Object(O.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:x.map((function(e){return Object(O.jsx)(z,{title:e.author,subHeader:"10 mins ago",content:e.text},e._id)}))})]})]})};a(304);var M=function(){return Object(O.jsx)("div",{className:"body",children:Object(O.jsxs)("div",{className:"text-blinking",children:[Object(O.jsx)("span",{children:"L"}),Object(O.jsx)("span",{children:"o"}),Object(O.jsx)("span",{children:"a"}),Object(O.jsx)("span",{children:"d"}),Object(O.jsx)("span",{children:"i"}),Object(O.jsx)("span",{children:"n"}),Object(O.jsx)("span",{children:"g"}),Object(O.jsx)("span",{children:"."}),Object(O.jsx)("span",{children:"."}),"\xa0",Object(O.jsx)("span",{children:"."}),Object(O.jsx)("span",{children:"."}),Object(O.jsx)("span",{children:"."}),Object(O.jsx)("span",{children:"."}),Object(O.jsx)("span",{children:"."}),Object(O.jsx)("span",{children:"."})]})})};var Y=function(){var e=Object(n.useContext)(w),t=e.state,a=e.dispatch,r="localhost"===window.location.hostname.split(":")[0]?"http://localhost:2000":"";return Object(n.useEffect)((function(){return m.a.get("".concat(r,"/api/v1/tokenverify"),{withCredentials:!0}).then((function(e){var t;(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.email)?a({type:"USER_LOGIN",payload:{id:e.data.id,fullName:e.data.fullName,email:e.data.email,gender:e.data.gender,phoneNumber:e.data.phoneNumber,address:e.data.address}}):a({type:"USER_LOGOUT"})})).catch((function(e){a({type:"USER_LOGOUT"})})),function(){}}),[]),Object(O.jsxs)(O.Fragment,{children:[void 0===t.user?Object(O.jsxs)(g.c,{children:[Object(O.jsx)(g.a,{exact:!0,path:"/",children:Object(O.jsx)(M,{})}),Object(O.jsx)(g.a,{path:"*",children:Object(O.jsx)(M,{})})]}):null,null===t.user?Object(O.jsxs)(g.c,{children:[Object(O.jsx)(g.a,{exact:!0,path:"/",component:E}),Object(O.jsx)(g.a,{exact:!0,path:"/signup",component:I}),Object(O.jsx)(g.a,{path:"*",children:Object(O.jsx)(E,{})})]}):null,t.user?Object(O.jsxs)(g.c,{children:[Object(O.jsx)(g.a,{exact:!0,path:"/",component:J}),Object(O.jsx)(g.a,{exact:!0,path:"/profile",component:D}),Object(O.jsx)(g.a,{path:"*",children:Object(O.jsx)(J,{})})]}):null]})},Q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,372)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),s(e),o(e)}))},X=a(49);o.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(N,{children:Object(O.jsx)(X.a,{children:Object(O.jsx)(Y,{})})})}),document.getElementById("root")),Q()}},[[305,1,2]]]);
//# sourceMappingURL=main.dc65207f.chunk.js.map